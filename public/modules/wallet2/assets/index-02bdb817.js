var k=(e,a,o)=>new Promise((c,l)=>{var d=i=>{try{t(o.next(i))}catch(r){l(r)}},n=i=>{try{t(o.throw(i))}catch(r){l(r)}},t=i=>i.done?c(i.value):Promise.resolve(i.value).then(d,n);t((o=o.apply(e,a)).next())});import{s as _,D as R,E as M,L as P,l as C,d as E}from"./manifest-0db0cc1f.js";import{F as b,S as $,b as v,a as B,g as O,o as T}from"./solid-js-559c9ced.js";import{d as N,i as f,c as h,e as p,s as S,b as x,t as u,u as F}from"./web-fda571d6.js";import{c as A}from"./store-2ed2b91e.js";import{c as D}from"./data-74542b41.js";import{s as g}from"./store-b24a2817.js";function te(e,a="USD"){return a==="BC"?Number(_.toCryptoStr(new R(e),"BC")).toLocaleString():_.toFiatStr(new R(e),a)}function re(e,a=!1){return e.toLocaleString(void 0,{signDisplay:a?"always":"never"})}function ae(e){let a="";return e>=1e9?(e=e/1e9,a="G"):e>=1e6?(e=e/1e6,a="M"):e>=1e3&&(e=e/1e3,a="K"),a?e.toFixed(1).replace(/\.0$/,"")+a:Number(e.toFixed(2)).toString()}var I=u("<div class=absolute-center>"),U=u('<div><div class="overflow-x-auto overflow-y-hidden"><table><thead><tr class=uppercase></tr></thead><tbody class=relative>'),W=u('<th class="px-4 font-semibold text-secondary py-3">'),G=u("<tr class=odd:bg-layer5>"),J=u('<td class="px-4 h-11">');function ie(e){return(()=>{var a=U(),o=a.firstChild,c=o.firstChild,l=c.firstChild,d=l.firstChild,n=l.nextSibling;return f(d,h(b,{get each(){return e.columns},children:(t,i)=>(()=>{var r=W();return f(r,()=>t.title),p(s=>{var m=t.align||(i()===0?"left":"right"),y=`${t.width/16}rem`;return m!==s.e&&S(r,"align",s.e=m),y!==s.t&&((s.t=y)!=null?r.style.setProperty("width",y):r.style.removeProperty("width")),s},{e:void 0,t:void 0}),r})()})),f(n,h(b,{get each(){return e.dataSource},children:(t,i)=>(()=>{var r=G();return r.$$click=()=>e.onRowClick&&e.onRowClick(t,i()),f(r,h(b,{get each(){return e.columns},children:(s,m)=>{const y=s.render?s.render(t):t[s.dataIndex];return(()=>{var w=J();return f(w,y===void 0?"--":y),p(()=>S(w,"align",s.align||(m()===0?"left":"right"))),w})()}})),r})()})),f(a,h($,{get when(){var t;return!((t=e.dataSource)!=null&&t.length)},get children(){return h(M,{})}}),null),f(a,h($,{get when(){return e.loading},get children(){var t=I();return f(t,h(P,{})),t}}),null),p(t=>{var s;var i=C("relative rounded-xl max-h-100 overflow-scroll",!((s=e.dataSource)!=null&&s.length)&&"min-h-50"),r=C("h-full w-full table-fixed","font-500 bg-layer4 text-sm font-semibold text-primary border-separate border-spacing-x-0 border-spacing-y-0",e.class);return i!==t.e&&x(a,t.e=i),r!==t.t&&x(c,t.t=r),t},{e:void 0,t:void 0}),a})()}N(["click"]);var K=u("<div class=absolute-center>"),H=u('<div><iframe class="h-full w-full">');const j=e=>{const[a,o]=q(()=>d),[c,l]=A({chartLoading:!0,isReadyRender:!1,chartOptions:{mode:"basic",periodicity:e.period,symbol:"BC-USD"}});v(()=>{e.period&&l("chartOptions","periodicity",e.period)}),v(()=>{!g.wsPrice.price||c.chartLoading||o({type:"draw",payload:[e.period==="500ms"?{DT:new Date(g.wsPrice.time),Close:g.wsPrice.price}:{DT:new Date(g.wsPrice.time),Close:g.wsPrice.price,Date:String(g.wsPrice.time),Open:g.wsPrice.open,High:g.wsPrice.high,Low:g.wsPrice.low}]})}),v(()=>k(void 0,null,function*(){const n=a(),t=e.period;if(!(!n||!n.type))if(n.type==="initial"&&n.payload){const{start:i,end:r}=n.payload;o({type:"initial",payload:(yield D.initial(r-i,t)).format()})}else if(n.type==="pagination"){const{start:i,end:r}=n.payload;o({type:"pagination",payload:(yield D.pagination(i,r,t)).format()})}else n.type==="loading-change"?l("chartLoading",n.payload):n.type==="ready-to-create"&&l("isReadyRender",!0)})),v(()=>{c.isReadyRender&&o({type:"set-theme",payload:E.darken?L.darken:L.lighten})}),v(()=>{c.isReadyRender&&o({type:"render",payload:c.chartOptions})});let d;return(()=>{var n=H(),t=n.firstChild;f(n,h($,{get when(){return c.chartLoading||!c.isReadyRender},get children(){var r=K();return f(r,h(P,{})),r}}),t);var i=d;return typeof i=="function"?F(i,t):d=t,p(r=>{var s=C("relative h-72",e.class),m="https://detrade.com/chart-iframe/";return s!==r.e&&x(n,r.e=s),m!==r.t&&S(t,"src",r.t=m),r},{e:void 0,t:void 0}),n})()};function q(e){const a=l=>{var d;(d=e().contentWindow)==null||d.postMessage(JSON.stringify(l),{targetOrigin:"*"})},[o,c]=B();return O(()=>{const l=d=>{if(!(!d.data||typeof d.data!="string"))try{c(JSON.parse(d.data))}catch(n){}};window.addEventListener("message",l,!1),T(()=>{window.removeEventListener("message",l)})}),[o,a]}const ne=j,L={lighten:{klineBorderColor:"#A8C200",klineBottomColor:"rgba(205, 233, 25, 0)",klineTopColor:"rgba(205, 233, 25, 0.6)",klineWidth:"2px",theme:"lighten"},darken:{klineBorderColor:"#D7ED47",klineBottomColor:"rgba(22, 29, 38, 0)",klineTopColor:"rgba(205, 233, 25, 0.5)",klineWidth:"2px",theme:"darken"}};export{ne as C,ie as T,te as a,re as b,ae as f};
