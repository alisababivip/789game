import{c as r,t as l,i as a,a as o,h as G,m as J}from"./i18n-98ba7270.js";import{P as K,E as Q,B as v,_ as I,l as T,w as f,p as R,u as k,V as W,e as P,j as X,I as h,n as Z,x as ee,m as te}from"./manifest-04ceac01.js";import{b as ae,c as re,e as ne,S as C,h as le,d as ie}from"./solid-js-9bdbdf5e.js";import{c as b}from"./store-2fc868cc.js";import{T as se}from"./table-92260ac5.js";import{T as oe}from"./skeleton-18277cd6.js";import{a as de}from"./utils-64298f05.js";import{b as ce}from"./router-64ab6322.js";var ue=o('<div class=mb-4><p class="mb-3 text-secondary">'),me=o("<div>");const pe=function(c){const[s,m]=ae("");function p(){return I().post("agent/invitation/code/add/",{invitationName:s(),campaignName:s()}).then(n=>{try{T.copyToClipboard(n.invitationUrl),f(l("Referral code created and copied to clipboard."))}catch(t){f(l("Referral code created."))}c.closeDialog(),R.pop()}).catch(n=>{f(n.message)})}return r(K,{get title(){return l("Create Code")},get children(){return[(()=>{var n=ue(),t=n.firstChild;return a(t,()=>l("Campaign Name (Optional)")),a(n,r(Q,{class:"input",get placeholder(){return l("Enter Campaign Name")},get value(){return s()},onChange:m}),null),n})(),(()=>{var n=me();return a(n,r(v,{onClick:t=>{t.preventDefault(),p()},type:"brand",class:"w-full",get children(){return l("Create campaign")}})),n})()]}})};var ge=o('<span class="font-semibold text-secondary">'),fe=o('<div class="center gap-1 font-semibold"><span>'),ve=o('<div class="center gap-1 font-semibold"><span class="font-semibold leading-6 text-primary">'),he=o('<span class="font-semibold leading-6 text-primary">%'),Ce=o('<span class="font-semibold leading-6 text-secondary">'),be=o('<div class="flex cursor-pointer items-center justify-end gap-2"><span class="font-semibold text-primary">'),xe=o("<div>"),$e=o("<div class=sm:p-4>");function _e(d){const c=k(),[s,m]=b({pageSize:10,page:1}),p=re(()=>d.data.list.slice((s.page-1)*s.pageSize,s.page*s.pageSize),[d.data.list,s.page,s.pageSize]),n=()=>[{title:l("Name"),dataIndex:"campaignName",render(t){return(()=>{var e=ge();return a(e,t||"--"),e})()}},{title:l("Code"),dataIndex:"aliasCode",render(t){return(()=>{var e=fe(),i=e.firstChild;return a(i,t),a(e,r(v,{onClick:()=>{T.copyToClipboard(t.toString()),f(l("Copied"))},get children(){return r(h,{name:"Copy",class:"w-4 text-secondary"})}}),null),e})()}},{title:l("Link"),dataIndex:"invitationUrl",render(t){return(()=>{var e=ve(),i=e.firstChild;return a(i,t),a(e,r(v,{get children(){return r(h,{class:"w-4 cursor-pointer text-secondary",onClick:()=>{try{navigator.clipboard.writeText(t),f(l("Invitation URL copied to clipboard."))}catch(g){}},name:"Copy"})}}),null),e})()}},{title:l("Commission Rate"),dataIndex:"ratio",render(t){return(()=>{var e=he(),i=e.firstChild;return a(e,t*100,i),e})()}},{title:l("Date Created"),dataIndex:"createTime",render(t){return(()=>{var e=Ce();return a(e,()=>de(new Date(t),"YYYY-MM-DD HH:mm:ss")),e})()}},{title:l("Referrals"),dataIndex:"registerNum",render(t,e){return(()=>{var i=be(),g=i.firstChild;return i.$$click=()=>c("/referral-code-detail",{state:e}),a(g,t),a(i,r(h,{class:"w-4 rotate-180 text-secondary",name:"Arrow"}),null),i})()}}];return(()=>{var t=xe();return a(t,r(ne,{get fallback(){return r(oe,{width:5,height:3,rows:10,get columns(){return n()}})},get children(){return r(C,{get when(){return p().length>0},get fallback(){return r(W,{get children(){return l("No rewards yet invite friends to join you now!")}})},get children(){return(()=>{var e=$e();return a(e,r(se,{get data(){return p()},get columns(){return J(()=>!!P.mobile)()?n().filter(i=>i.dataIndex==="campaignName"||i.dataIndex==="aliasCode"||i.dataIndex==="registerNum"):n()}}),null),a(e,r(C,{get when(){return d.data.createdNum>10},get children(){return r(X,{class:"flex justify-end p-3",get current(){return s.page},onChange:i=>m("page",i),get total(){return d.data.createdNum},get pageSize(){return s.pageSize}})}}),null),e})()}})}})),t})()}G(["click"]);var ye=o('<div class="absolute top-12 h-[1px] w-full bg-third">'),Se=o('<div class="bg-layer2 font-semibold"><div class="items-center justify-between rounded-lg bg-layer4 p-4 sm:flex"><div class="mb-4 flex flex-1 items-center"><div class="flex-1 text-secondary"><div></div><div class="text-2xl font-extrabold"><span class=text-primary></span>/</div></div><div class="flex-1 text-secondary"><div></div><div class="text-2xl font-extrabold text-primary"><span></span></div></div></div><div class="flex w-full items-center border-third sm:h-20 sm:w-60 sm:border-l sm:pl-10"></div></div><section class="relative mt-4 rounded-xl bg-layer4 pt-2">');function we(d){const c=d.split("/");return c?c[c.length-1]:""}function ze(d){const c=I(),s=k(),m=new Date,p=m.toISOString().slice(0,10),n=new Date(m);n.setDate(n.getDate()-90);const t=n.toISOString().slice(0,10),[e,i]=b({wagerStartDate:t,wagerEndDate:p,page:1,pageSize:20}),[g,E]=b({list:[],totalCodeNum:0,createdNum:0}),z=()=>c.post("/agent/invitation/code/list/",e).then(u=>{u&&u.list&&E({list:u.list,totalCodeNum:u.totalCodeNum,createdNum:u.createdNum})}),[,{refetch:L}]=le(()=>e,z),j=ce(),A=()=>we(j.pathname),U=()=>Number(x.indexOf(A())),x=["code","friends"],M=Z(),O=ee();return ie(()=>{M()&&O().scrollTo({top:0,left:0,behavior:"smooth"})}),(()=>{var u=Se(),$=u.firstChild,_=$.firstChild,y=_.firstChild,S=y.firstChild,w=S.nextSibling,N=w.firstChild;N.nextSibling;var Y=y.nextSibling,D=Y.firstChild,H=D.nextSibling,B=H.firstChild,F=_.nextSibling,V=$.nextSibling;return a(S,()=>l("Referral Code Created")),a(N,()=>g.createdNum),a(w,()=>g.totalCodeNum,null),a(D,()=>l("Friends")),a(B,()=>d.friendTableList.total),a(F,r(v,{onClick:()=>{R.push(()=>r(pe,{closeDialog:L}))},class:"h-10 w-full",type:"brand",get children(){return l("Create Code")}})),a(V,r(te,{class:"sm:w-96",type:"indicator",get value(){return U()},onChange:q=>s(`/affiliate/referral/${x[q]}`,{replace:!0}),get children(){return[r(C,{get when(){return!P.mobile},get children(){return ye()}}),r(_e,{data:g})]}})),u})()}export{ze as default};
