var Ae=Object.defineProperty,Le=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var le=(a,r,n)=>r in a?Ae(a,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[r]=n,W=(a,r)=>{for(var n in r||(r={}))ie.call(r,n)&&le(a,n,r[n]);if(M)for(var n of M(r))oe.call(r,n)&&le(a,n,r[n]);return a},de=(a,r)=>Le(a,ke(r));var ce=(a,r)=>{var n={};for(var o in a)ie.call(a,o)&&r.indexOf(o)<0&&(n[o]=a[o]);if(a!=null&&M)for(var o of M(a))r.indexOf(o)<0&&oe.call(a,o)&&(n[o]=a[o]);return n};import{i as t,c as e,t as i,e as we,s as Oe,a as d,h as Q,b as Pe,m as z,T as ue}from"./i18n-98ba7270.js";import{c as X}from"./store-2fc868cc.js";import{a as Fe,b as je}from"./servers-dce2e55b.js";import{S as D,F as ze,b as O,h as K,d as G,e as $e,c as Me,o as We}from"./solid-js-9bdbdf5e.js";import{u as Ye,b as Ee}from"./router-64ab6322.js";import{V as Z,a as Be,D as b,v as Ve,a9 as qe,c as me,I as P,u as B,e as j,j as _e,_ as ye,w as He,S as Ke,E as Ge,l as Je,b as Qe,p as ge,B as E,m as Y,P as Xe}from"./manifest-04ceac01.js";import{a as T}from"./utils-64298f05.js";import{T as Ce}from"./skeleton-18277cd6.js";import{T as De}from"./table-92260ac5.js";import{T as Ze}from"./transition-mask-6f500926.js";import{h as et}from"./http-f69dd5cf.js";import{I as fe}from"./index-b3ef434e.js";import"./memoize-91f976fa.js";import"./_MapCache-91cc8331.js";import"./_baseGetTag-c2e287b9.js";var tt=d("<div class=mb-3>"),at=d('<div class="rounded-lg p-3">'),rt=d('<div class="my-5 flex items-center justify-between"><div class="center gap-3"><img class="h-8 w-8"alt=icon><span class=w></span></div><div class="pc:gap-10 flex gap-14"><div class="flex flex-col items-center"><span class="font-extrabold text-brand">$</span><span class=text-secondary></span></div><div class="flex flex-col items-end"><span class=font-extrabold>$</span><span class=text-secondary>');const nt=function(r){return(()=>{var n=at();return t(n,e(D,{get when(){return r.data.length},get fallback(){return e(Z,{get children(){return i("No rewards yet invite friends to join you now!")}})},get children(){return[(()=>{var o=tt();return t(o,()=>r.children),o})(),e(ze,{get each(){return r.data},children:o=>(()=>{var m=rt(),x=m.firstChild,w=x.firstChild,N=w.nextSibling,A=x.nextSibling,v=A.firstChild,f=v.firstChild;f.firstChild;var c=f.nextSibling,u=v.nextSibling,g=u.firstChild;g.firstChild;var $=g.nextSibling;return t(N,()=>Be.getAlias(o.currencyName)),t(f,()=>new b(o.availableUsd).toFixed(2,b.ROUND_DOWN),null),t(c,()=>i("Available")),t(g,()=>new b(o.commissionUsd).toFixed(2,b.ROUND_DOWN),null),t($,()=>i("Total Received")),we(()=>Oe(w,"src",Ve.coinIcon(o.currencyName))),m})()})]}})),n})()};var st=d('<div class="order-first text-nowrap">'),lt=d('<div class="center absolute right-4 top-1/2 h-4 w-4 -translate-y-1/2 cursor-pointer rounded-full bg-layer4">'),it=d("<div>");function ot(a){return Array.isArray(a)&&a.length===2&&a[0]instanceof Date&&a[1]instanceof Date}const dt=new Date,I=new Date(dt.getTime()-1e3);function J(a){return(()=>{var r=it();return t(r,e(qe,{get class(){return me("bg-layer3",a.datePickerClass)},get options(){return a.options},get value(){return a.value},get onChange(){return a.onChange},format:n=>ot(n)?n[0].getTime()===I.getTime()?"All Range":`${T(n[0],"YYYY/MM/DD")}-${T(n[1],"YYYY/MM/DD")}`:T(n),get children(){var n=st();return t(n,()=>a.label),n}}),null),t(r,e(D,{get when(){return a.clear},get children(){var n=lt();return n.$$click=()=>a.onChange([I,I]),t(n,e(P,{class:"w-4/5 text-secondary",name:"Close"})),n}}),null),we(()=>Pe(r,me("relative w-full",a.class))),r})()}Q(["click"]);var q=d('<span class="font-semibold leading-6 text-secondary">'),ct=d('<span class="font-semibold leading-6">'),ut=d('<div class="flex cursor-pointer items-center justify-end gap-2"><span class="font-semibold text-brand">$'),mt=d('<div class="flex flex-col gap-3 p-3"><div class="flex flex-col gap-3 sm:flex-row">'),gt=d("<div>");const ft=function(r){const n=B(),[o,m]=X({beginDate:"",endDate:"",page:1,pageSize:10}),[x,w]=O([I,I]),N=()=>{const c=W({},o);return x()[0]===I&&(c.beginDate="",c.endDate=""),et.post("/agent/information/referral-rewards/list/",c)},[A,{refetch:v}]=K(()=>o.page,N);G(()=>{m("beginDate",T(x()[0])),m("endDate",T(x()[1])),m("page",1),v()});const f=()=>[{title:i("Username"),dataIndex:"userName",render(c){return(()=>{var u=q();return t(u,c),u})()}},{title:i("Registration Date"),dataIndex:"createDate",render(c){return(()=>{var u=q();return t(u,c),u})()}},{title:i("VIP Level"),dataIndex:"userLevel",render(c){return(()=>{var u=ct();return t(u,c),u})()}},{title:i("Code"),dataIndex:"aliasCode",render(c){return(()=>{var u=q();return t(u,c),u})()}},{title:i("Earned"),dataIndex:"rewardUsd",render(c,u){return(()=>{var g=ut(),$=g.firstChild;return $.firstChild,g.$$click=()=>n("/rewards-detail",{state:u}),t($,c,null),t(g,e(P,{class:"w-4 rotate-180 text-secondary",name:"Arrow"}),null),g})()}}];return(()=>{var c=mt(),u=c.firstChild;return t(c,()=>r.children,u),t(u,e(J,{class:"!w-80",get value(){return x()},onChange:w,get label(){return i("Registration Date:")},clear:!0})),t(c,e($e,{get fallback(){return e(Ce,{width:5,height:2.1,rows:10,get columns(){return f()}})},get children(){return e(D,{get when(){return A()},children:g=>(()=>{var $=gt();return t($,e(Ze,{get children(){return e(De,{get data(){return g().list},get columns(){return z(()=>!!j.mobile)()?f().filter(_=>_.dataIndex==="userName"||_.dataIndex==="userLevel"||_.dataIndex==="rewardUsd"):f()},get empty(){return e(Z,{get children(){return i("No rewards yet invite friends to join you now!")}})}})}}),null),t($,e(D,{get when(){return g().total>10},get children(){return e(_e,{class:"flex justify-end p-3",get current(){return o.page},onChange:_=>m("page",_),get total(){return g().total},get pageSize(){return o.pageSize}})}}),null),$})()})}}),null),c})()};Q(["click"]);var pt=d('<span class="font-semibold text-secondary">'),pe=d('<span class="font-semibold leading-6 text-secondary">'),bt=d('<span class="font-semibold leading-6 text-primary">%'),ht=d('<span class="font-semibold leading-6 text-primary">'),vt=d('<div class="flex cursor-pointer items-center justify-end gap-1 font-semibold"><span class=text-brand>'),xt=d('<div class=p-4><div class="mb-3 flex flex-col gap-3 sm:flex-row"><div class="center flex-1 gap-3"></div><div class="flex flex-1 flex-col gap-3 sm:flex-row">');function wt(a,r){return ye().post("/agent/invitation/code/list/",{wagerStartDate:a,wagerEndDate:r,page:1,pageSize:20})}function $t(a){const[r]=Ye(),n=B(),o=ye(),m=new Date,x=m.toISOString().slice(0,10),w=new Date(m);w.setDate(w.getDate()-90);const N=w.toISOString().slice(0,10),[A]=K(()=>wt(N,x),{initialValue:{list:[],totalCodeNum:0,createdNum:0}}),[v,f]=X({beginDate:"",endDate:"",wagerBeginDate:N,wagerEndDate:x,code:"",aliasCode:"All Codes",userName:"",userId:"",page:1,pageSize:10,sortName:null,sortType:null});function c(s){const h=s,{aliasCode:l}=h,p=ce(h,["aliasCode"]);return l==="All Codes"?de(W({},p),{aliasCode:""}):s}const u=Me(()=>{var p;const s=[],l=(p=A())==null?void 0:p.list;return l&&l.length>0&&l.map(U=>{s.push(U.aliasCode)}),["All Codes",...s]});G(()=>{r.code&&u().length>1&&f("aliasCode",r.code)});const[g,$]=O([I,I]),[_,F]=O([w,m]);G(()=>{f("beginDate",T(g()[0])),f("endDate",T(g()[1])),f("wagerBeginDate",T(_()[0])),f("wagerEndDate",T(_()[1])),C()});const y=()=>[{title:i("Username"),dataIndex:"userName",render(s){return(()=>{var l=pt();return t(l,s),l})()}},{title:i("User ID"),dataIndex:"userId",render(s){return(()=>{var l=pe();return t(l,s),l})()}},{title:i("Commission Rate"),dataIndex:"commissionRate",render(s){return(()=>{var l=bt(),p=l.firstChild;return t(l,()=>Number(s)*100,p),l})()}},{title:i("Total Deposits (Past 7D)"),dataIndex:"day7TotalDeposits",render(s){return(()=>{var l=ht();return t(l,s),l})()}},{title:i("Registration Date"),dataIndex:"createDate",render(s){return(()=>{var l=pe();return t(l,s),l})()}},{title:i("Total Commission"),dataIndex:"commissionUsd",render(s,l){return(()=>{var p=vt(),U=p.firstChild;return p.$$click=()=>n("/friends-detail",{state:l}),t(U,s),t(p,e(P,{name:"Arrow",class:"w-4 rotate-180 text-secondary"}),null),p})()}}],[S,R]=O(!0),[L,{refetch:C}]=K(()=>v.aliasCode,()=>{if(!S()){const s=W({},v);return g()[0]===I&&(s.beginDate="",s.endDate=""),o.post("/agent/information/list/",c(s)).then(l=>({list:l.list||[],page:l.page||0,pageSize:l.pageSize||0,total:l.total||0,totalPage:l.totalPage||0})).catch(l=>(He(l),{list:[],page:0,pageSize:0,total:0,totalPage:0}))}return R(!1),a.friendTableList},{initialValue:a.friendTableList});return(()=>{var s=xt(),l=s.firstChild,p=l.firstChild,U=p.nextSibling;return t(p,e(Ke,{class:"flex-1 !bg-layer3",get value(){return v.aliasCode},get options(){return u()},onChange:h=>{f("aliasCode",h)},children:h=>h()}),null),t(p,e(Ge,{class:"flex-1 bg-layer3",get value(){return v.userName},onChange:h=>f("userName",h),get placeholder(){return i("Search UserName")},onblur:C,get children(){return e(P,{onClick:C,name:"Search",class:"order-first -ml-1 mr-1 h-6 w-6 text-secondary"})}}),null),t(U,e(J,{get value(){return g()},onChange:$,get label(){return i("Registration Date:")},clear:!0}),null),t(U,e(J,{options:{minDate:w,maxDate:new Date},get value(){return _()},onChange:F,get label(){return i("Wager Date:")}}),null),t(s,e($e,{get fallback(){return e(Ce,{width:5,height:2.1,rows:10,get columns(){return y()}})},get children(){return e(D,{get when(){return L()},children:h=>[e(De,{get data(){return h().list},get columns(){return z(()=>!!j.mobile)()?y().filter(k=>k.dataIndex==="userName"||k.dataIndex==="commissionUsd"):y()},get empty(){return e(Z,{get children(){return i("No rewards yet invite friends to join you now!")}})}}),e(D,{get when(){return h().total>10},get children(){return e(_e,{class:"flex justify-end p-3",get current(){return v.page},onChange:k=>{f("page",k),C()},get pageSize(){return v.pageSize},get total(){return h().total}})}})]})}}),null),s})()}Q(["click"]);var _t=d('<div class="absolute top-12 h-[1px] w-full bg-third">'),yt=d('<div class="bg-layer2 font-semibold"><section class="mb-4 flex flex-col gap-3 rounded-xl bg-layer4 p-4 sm:flex-row sm:items-center sm:justify-between sm:gap-5"><div class="flex flex-col border-b border-third pb-3 sm:flex-1 sm:border-none sm:pb-0"><div class="flex items-center justify-between"><span class=text-secondary></span></div><span class="mb-3 text-2xl font-extrabold text-brand">$</span><div><span class="mr-1 text-nowrap"></span><span>$</span></div></div><div class="flex flex-col md:flex-1"><div class="flex items-center justify-between"><span class=text-secondary></span></div><span class="mb-3 text-2xl font-extrabold text-brand">$</span><div class="flex items-center gap-3"><div><span class="mr-1 text-nowrap text-secondary"></span><span class=sub-num>$</span></div><div><span class="mr-1 text-nowrap text-secondary"></span><span class=sub-num>$</span></div></div></div><div class="flex items-center gap-2 border-third sm:h-20 sm:border-l sm:pl-4 lg:pl-10"></div></section><section class="relative rounded-xl bg-layer4 pt-2">'),Ct=d('<h3 class="text-base font-extrabold">Available Commission Rewards'),be=d('<p class="font-semibold text-secondary">The rewards you can withdraw to your wallet.'),he=d('<h3 class="text-base font-extrabold">Total received'),Dt=d('<p class="font-semibold text-secondary">The rewards you have received up to now. It includes the rewards already withdrawn and the available commission rewards.'),Rt=d("<div class=content>"),Ut=d('<h3 class="text-base font-extrabold">Available Referral Rewards'),St=d('<p class="font-semibold text-secondary">All unlocked rewards received so far, including withdrawn and available for withdrawal.'),Tt=d('<h3 class="text-base font-extrabold">Locked Rewards'),It=d('<p class="font-semibold text-secondary">The rewards that you will receive in the future when your friends’ VIP level increases.'),ve=d("<span class=font-extrabold>"),Nt=d('<div class="right-2 top-2 flex items-center justify-between sm:absolute sm:gap-3">');function Re(a){const r=a.split("/");return r?r[r.length-1]:""}const Kt=function(r){const n=B(),{isUsHost:o}=Je.getHostType(j.host),[m,x]=X({ratio:"0",maxRatio:"0",friendNumber:0,commissionUsd:"0",availableCommissionUsd:"0",rewardUsd:"0",availableRewardUsd:"0",remainingRewardUsd:"0",todayWagerUsd:"0",todayCommissionUsd:"0"}),[w,N]=O([]),[A,v]=O([]),[f,c]=O([]),u=()=>{Promise.all([Fe(),je()]).then(y=>{if(y&&y.length===2){const S=y[0].dashboard;x(S);const R=y[1];N(R);const L=[],C=[];for(let s=0;s<R.length;s++)R[s].availableAmount>0&&(L.push(R[s]),C.push(R[s]));if(Number(S.availableRewardUsd)>0){const s=C.find(l=>l.currencyName==="USDT");s?s.availableAmount=(Number(s.availableAmount)+Number(S.availableRewardUsd)).toString():C.push({availableAmount:S.availableRewardUsd,availableUsd:"",commissionAmount:"",commissionUsd:"",currencyName:o?"SC":"USDT",userId:0})}c(C),v(L)}})};We(()=>{u()}),Qe.on("refresh_reward",function(){u()});const g=Ee(),$=()=>Re(g.pathname),_=()=>Number(F.indexOf($())),F=["friends","commission","referral"];return(()=>{var y=yt(),S=y.firstChild,R=S.firstChild,L=R.firstChild,C=L.firstChild,s=L.nextSibling;s.firstChild;var l=s.nextSibling,p=l.firstChild,U=p.nextSibling;U.firstChild;var h=R.nextSibling,k=h.firstChild,Ue=k.firstChild,V=k.nextSibling;V.firstChild;var Se=V.nextSibling,ee=Se.firstChild,te=ee.firstChild,ae=te.nextSibling;ae.firstChild;var Te=ee.nextSibling,re=Te.firstChild,ne=re.nextSibling;ne.firstChild;var se=h.nextSibling,Ie=S.nextSibling;return t(C,()=>i("Available Commission Rewards")),t(L,e(P,{name:"Info",class:"w-5 text-secondary",onClick:()=>ge.push(()=>e(xe,{get type(){return F[0]}}))}),null),t(s,()=>new b(m.availableCommissionUsd).toFixed(2,b.ROUND_FLOOR),null),t(p,()=>i("Total Received")),t(U,()=>new b(m.commissionUsd).toFixed(2,b.ROUND_FLOOR),null),t(Ue,()=>i("Available Referral Rewards")),t(k,e(P,{name:"Info",class:"w-5 text-secondary",onClick:()=>ge.push(()=>e(xe,{get type(){return F[1]}}))}),null),t(V,()=>new b(m.availableRewardUsd).toFixed(2,b.ROUND_FLOOR),null),t(te,()=>i("Total Received")),t(ae,()=>new b(m.rewardUsd).toFixed(2,b.ROUND_FLOOR),null),t(re,()=>i("Locked Rewards")),t(ne,()=>new b(m.remainingRewardUsd).toFixed(2,b.ROUND_FLOOR),null),t(se,e(D,{when:!o,get children(){return e(E,{class:"h-10 flex-1 sm:px-8",type:"second",get disabled(){return z(()=>!!new b(m.availableCommissionUsd).equals(0))()&&new b(m.availableRewardUsd).equals(0)},onClick:()=>{n("/rewards-swap",{state:{availableCommissionUsd:m.availableCommissionUsd,availableRewardUsd:m.availableRewardUsd,list:A()}})},get children(){return i("Swap")}})}}),null),t(se,e(E,{class:"h-10 flex-1 sm:flex-auto sm:px-8",type:"brand",get disabled(){return z(()=>!!new b(m.availableCommissionUsd).equals(0))()&&new b(m.availableRewardUsd).equals(0)},onClick:()=>{n("/rewards-withdraw",{state:{list:A(),previewList:f()}})},get children(){return i("Withdraw to Wallet")}}),null),t(Ie,e(Y,{get value(){return _()},type:"indicator",class:"border-third sm:w-96",onChange:Ne=>n(`/affiliate/my-rewards/${F[Ne]}`,{replace:!0}),get children(){return[e(D,{get when(){return!j.mobile},get children(){return[e(H,{}),_t()]}}),e(Y.TabItem,{get title(){return i("Commission by Friends")},get children(){return e($t,{get friendTableList(){return r.friendTableList}})}}),e(Y.TabItem,{get title(){return i("Commission by Currency")},get children(){return e(nt,{get data(){return w()},get children(){return e(D,{get when(){return j.mobile},get children(){return e(H,{})}})}})}}),e(Y.TabItem,{get title(){return i("Level Up Rewards")},get children(){return e(ft,{get children(){return e(D,{get when(){return j.mobile},get children(){return e(H,{})}})}})}})]}})),y})()};function xe(a){return e(Xe,{get title(){return z(()=>a.type==="commission")()?i("Commission Rewards"):i("Referral Rewards")},get children(){var r=Rt();return t(r,e(D,{get when(){return a.type==="commission"},get fallback(){return e(ue,{i18nKey:"bonus.affiliate.rewardtip2",get children(){return[Ut(),be(),he(),St(),Tt(),It()]}})},get children(){return e(ue,{i18nKey:"bonus.affiliate.rewardtip1",get children(){return[Ct(),be(),he(),Dt()]}})}})),r}})}function H(){const a=B(),r=()=>Re(location.pathname);return(()=>{var n=Nt();return t(n,e(E,{type:"second",class:"center h-8 gap-1 px-2",onClick:()=>{a("/affiliate/rules",{replace:!0})},get children(){return[e(fe,{name:"rateRules",size:16}),(()=>{var o=ve();return t(o,()=>i("Rules")),o})()]}}),null),t(n,e(E,{type:"second",class:"center h-8 gap-1 px-2",onClick:()=>{a(`/reward-history?type=${r()}`)},get children(){return[e(fe,{name:"time",size:16}),(()=>{var o=ve();return t(o,()=>i("History")),o})(),e(P,{class:"w-4 rotate-180 fill-secondary",name:"Arrow"})]}}),null),n})()}export{Kt as default};
