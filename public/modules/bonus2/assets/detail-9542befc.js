var G=(o,u,t)=>new Promise((f,m)=>{var p=y=>{try{x(t.next(y))}catch(O){m(O)}},$=y=>{try{x(t.throw(y))}catch(O){m(O)}},x=y=>y.done?f(y.value):Promise.resolve(y.value).then(p,$);x((t=t.apply(o,u)).next())});import{c as v,t as T,i,m as I,D as nt,e as P,s as rt,h as it,a as h}from"./i18n-98ba7270.js";import{D as M,T as at,u as J,Z as q,i as R,a2 as V,B as lt,f as st,e as ot,I as ct,a5 as dt,s as U,A as mt,a as W,_ as ut,w as gt}from"./manifest-04ceac01.js";import{b as pt,a as vt}from"./router-64ab6322.js";import{c as E,k as ft,e as X,S as B,F as ht,h as xt,t as $t,d as _t,s as bt}from"./solid-js-9bdbdf5e.js";import{d as yt}from"./index-5906eb9b.js";import{h as Y}from"./http-f69dd5cf.js";import{I as St}from"./imgX-802d2a7e.js";import{u as Z}from"./unescape-c47f7e46.js";import"./countdown-b1b7a949.js";import"./common-progress-bar-6e64ac9b.js";import"./findLastIndex-2b00e670.js";import"./_baseIteratee-433aee89.js";import"./baseService-11f77762.js";import"./_baseGetTag-c2e287b9.js";import"./isArray-79a0be9c.js";import"./_MapCache-91cc8331.js";import"./_baseIsEqual-63295eab.js";import"./isSymbol-269a4c68.js";import"./memoize-91f976fa.js";import"./toString-968993ce.js";import"./_arrayMap-2bcec0e7.js";import"./toInteger-80e35231.js";import"./toNumber-072076cc.js";import"./index-b3ef434e.js";import"./index-06e082ac.js";import"./index-5190623b.js";import"./center-loading-8e21230b.js";import"./utils-64298f05.js";import"./index-5fc1d562.js";import"./kr-config-c4c38b86.js";import"./helpers-6d4813f3.js";import"./_commonjsHelpers-5e4564a3.js";import"./vip-e3f3cfef.js";import"./index-c704ae69.js";import"./types-40e55d46.js";import"./_baseSlice-cf92e063.js";import"./currency-format-908260ab.js";import"./index-3d4bd0da.js";import"./index-89f8eab7.js";import"./empty-placeholder-ec08ec25.js";import"./debounce-830ce71a.js";import"./last-862de5a8.js";import"./_basePropertyOf-20a61b2b.js";var K;(o=>{o.getOpt=function(t){return t.map(f=>f.label)},o.getLabel=function(t,f){var m;return(m=t.find(p=>p.value===f))!=null?m:t[0]},o.getVal=function(t,f){var m;return(m=t.find(p=>p.value===f))!=null?m:t[0]}})(K||(K={}));function wt(o,u,t){const m=(typeof t=="number"?new M(u).toFixed(t,M.ROUND_DOWN):u.toString()).toString().split(".");return o==="INRFIAT"?(m[0]=Ct(m[0]).toString(),m.join(".")):(m[0]=m[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),m.join("."))}function Ct(o){var u=parseFloat(String(o));return isFinite(u)?Tt(u):o}function Tt(o){var u,t;o<0?(u=-1*o,t=!0):(u=o,t=!1);var f=String(u).split("").reverse(),m=f.indexOf(".")+1,p,$=[];for(p=0;p<m;p++)$.push(f[p]);var x=0;for(p=m;p<f.length;p++)$.push(f[p]),x++,(x===3||x===5||x===7)&&p<f.length-1&&$.push(","),x===7&&(x=0);return t&&$.push("-"),$.reverse().join("")}var kt=h('<div class="center mb-4 inline-flex rounded-lg py-1 text-sm leading-none text-secondary"><div class="center mr-3 h-8 w-8 rounded-md bg-layer4"></div><span class="text-xl font-extrabold text-primary">'),Dt=h('<div class="flex items-end"><span class="mr-1 text-sm max-sm:leading-5 sm:text-2xl">:</span><span class="text-base font-extrabold max-sm:leading-5 sm:text-3xl">d:<!>h:<!>m:<!>s'),It=h('<div class="center absolute bottom-0 right-0 rounded-tl-xl bg-layer1/80 px-2 py-1.5 text-primary sm:px-4 sm:py-2.5">'),Et=h('<div class="relative sm:flex sm:justify-center">'),Bt=h('<div class="relative mt-2 flex items-center max-sm:text-xs"><div class="">ðŸ“…<span class=ml-2></span></div><div class=px-2>-</div><div class=""><span class="">'),Ot=h('<div class="mb-5 mt-5 flex justify-between rounded-lg bg-layer5 p-2.5 sm:max-w-96"><div class="text-xl font-extrabold"></div><div class=text-right><div class="text-3xl font-extrabold text-warning_brighter"></div><div class="text-sm font-semibold text-tertiary">'),At=h('<div class="rounded-3xl bg-layer3 max-sm:mt-3 sm:bg-layer4 sm:pb-6"><div class=p-4><div class=""><div class="text-20px mt-4 text-left text-xl font-extrabold text-primary"></div></div><div class=""><div>'),Ft=h('<div class="mx-auto max-w-[900px] sm:pb-6">'),Lt=h('<div class="mx-16 truncate">'),jt=h('<div class="flex h-40 items-center justify-center">'),zt=h('<span class="font-bold text-warning">'),Pt=h('<div class="my-2 font-semibold">'),Rt=h('<div class=event-detail><div class="promotion-richStyle mb-4 text-sm leading-normal text-secondary">'),Ut=h('<div class="promotion-richStyle mb-4 text-sm leading-normal text-secondary"><div>'),Mt=h('<div class=mt-5><div class="text-left text-sm text-primary"></div><div class="grid grid-cols-2 gap-x-3 sm:grid-cols-5">'),Nt=h('<div class="mt-5 w-full cursor-pointer"><div class=align-middle><img class="block w-full rounded-md"alt=""></div><div class="ellipsis px-2.5 py-3.5 text-xs text-primary">');const Ht=o=>ut().get(`home/main/event/code/${o}`),Gt=()=>{const o=vt(),u=J(),[t]=q(()=>o.id?["/home/main/event/code/",{eventCode:o.id}]:void 0,c=>G(void 0,[c],function*([r,n]){try{const s=yield Ht(n.eventCode);return s.eventBgImg=s.eventBgImg||s.eventDarkImg,s.eventDarkImg=s.eventDarkImg||s.eventBgImg,s}catch(s){return u("/"),null}}),{expires:1e3*60*5}),[f,{mutate:m,refetch:p}]=q(()=>{var r,n;return t()&&((r=t())!=null&&r.joinSwitch)&&R.login?["/activity/user/apply/query/",{actEventId:(n=t())==null?void 0:n.actEventId}]:void 0},([r,n])=>Y.get(`/activity/user/apply/query/${n.actEventId}/`).then(c=>c.status)),$=J(),x=E(()=>{var r;return new M(((r=t())==null?void 0:r.totalPrize)||0)}),y=E(()=>{var r;return((r=t())==null?void 0:r.fiatType)||"USDFIAT"}),O=V(()=>{var r,n;return(n=(r=t())==null?void 0:r.liveStartTime)!=null?n:0}),Q=V(()=>{var r,n;return(n=(r=t())==null?void 0:r.liveEndTime)!=null?n:0}),tt=E(()=>{var s,S;const r=new Date().getTime(),n=(s=t())==null?void 0:s.liveStartTime,c=(S=t())==null?void 0:S.liveEndTime;return!n||!c?"unknown":r<n?"upcoming":r>=n&&r<c?"ongoing":"ended"}),k=E(()=>{const r=tt();return r==="upcoming"?{label:T("Coming Soon"),countdown:O(),isStarted:!1,hasEnded:!1}:r==="ongoing"?{label:T("Ends In"),countdown:Q(),isStarted:!0,hasEnded:!1}:{label:"",countdown:{days:0,hours:0,minutes:0,seconds:0},isStarted:!0,hasEnded:!0}}),N=r=>{if(!r)return"";const n=new Date(r);n.getDate(),n.getMonth(),n.getFullYear();const c=n.getHours().toString().padStart(2,"0"),s=n.getMinutes().toString().padStart(2,"0"),_=-n.getTimezoneOffset()/60,a=`${_>=0?"+":"-"}${Math.abs(_).toString().padStart(1,"0")}`,e=U.lang;return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"2-digit",day:"2-digit"}).format(n).replace(/[.,\s]/g,"/")} ${c}:${s} UTC${a}`},j=E(()=>{var c,s;const r=(c=t())==null?void 0:c.liveStartTime,n=(s=t())==null?void 0:s.liveEndTime;return!r||!n?{start:"",end:"",hasDateRange:!1}:{start:N(r),end:N(n),hasDateRange:!0}}),et=ft(()=>{const r=E(()=>{var _,D,a;const n=(_=t())==null?void 0:_.btnOneText,c=(D=t())==null?void 0:D.btnOneLink,s=()=>{if(!R.login){$("/login/regist");return}const[e]=xt(()=>{var l;return Y.post(`/activity/user/apply/${(l=t())==null?void 0:l.actEventId}`).catch(gt)});m(1),$t(l=>{_t(()=>{(e.error||!e.loading)&&(bt(()=>{p()}),l())})})},S=()=>{(l=>{var d;return l&&/http/.test((d=t())==null?void 0:d.btnOneLink)})(c)?window.open(c):$(c)};return((a=t())==null?void 0:a.joinSwitch)===1?f()===1?{children:n||T("Joined Successfully"),onClick:n?S:()=>{}}:{children:T("Apply To Join"),onClick:s}:n?{children:n,onClick:S}:{children:null}});return v(X,{fallback:null,get children(){return v(B,{get when(){return r().children},get children(){return v(lt,{type:"brand",get onClick(){return r().onClick},class:"mt-5 w-72 max-sm:w-full",get children(){return r().children}})}})}})});return v(st,{get title(){return(()=>{var r=Lt();return i(r,()=>{var n;return(n=t())==null?void 0:n.title}),r})()},get children(){var r=Ft();return i(r,v(B,{get when(){return!ot.mobile},get children(){var n=kt(),c=n.firstChild,s=c.nextSibling;return c.$$click=()=>{$("/promotions/promotion")},i(c,v(ct,{class:"w-5 cursor-pointer text-secondary",name:"Arrow"})),i(s,()=>T("Promotion")),n}}),null),i(r,v(X,{get fallback(){return(()=>{var n=jt();return i(n,v(dt,{})),n})()},get children(){var n=At(),c=n.firstChild,s=c.firstChild,S=s.firstChild,_=s.nextSibling,D=_.firstChild;return i(n,v(B,{get when(){var a,e;return I(()=>!!U.darken)()?(a=t())==null?void 0:a.eventDarkImg.length:(e=t())==null?void 0:e.eventBgImg.length},get children(){var a=Et();return i(a,v(nt,{class:"relative block w-full",get component(){var e;return(e=t())!=null&&e.linkUrl?mt:"div"},get href(){var e;return(e=t())==null?void 0:e.linkUrl},get children(){return[v(St,{class:"w-full rounded-md",get src(){var e,l;return I(()=>!!U.darken)()?(e=t())==null?void 0:e.eventDarkImg:(l=t())==null?void 0:l.eventBgImg},width:800,alt:""}),(()=>{var e=It();return i(e,v(B,{get when(){return!k().hasEnded},get fallback(){return(()=>{var l=zt();return i(l,()=>T("Event Ended")),l})()},get children(){var l=Dt(),d=l.firstChild,g=d.firstChild,w=d.nextSibling,C=w.firstChild,A=C.nextSibling,z=A.nextSibling,F=z.nextSibling,L=F.nextSibling,H=L.nextSibling;return H.nextSibling,i(d,()=>k().label,g),i(w,()=>{var b;return((b=k().countdown)==null?void 0:b.days)||0},C),i(w,()=>{var b;return((b=k().countdown)==null?void 0:b.hours)||0},A),i(w,()=>{var b;return((b=k().countdown)==null?void 0:b.minutes)||0},F),i(w,()=>{var b;return((b=k().countdown)==null?void 0:b.seconds)||0},H),l}})),e})()]}})),a}}),c),i(S,()=>{var a;return(a=t())==null?void 0:a.title}),i(s,(()=>{var a=I(()=>{var e;return!!((e=t())!=null&&e.subTitle)});return()=>a()&&(()=>{var e=Pt();return i(e,()=>{var l;return(l=t())==null?void 0:l.subTitle}),e})()})(),null),i(s,v(B,{get when(){return j().hasDateRange},get children(){var a=Bt(),e=a.firstChild,l=e.firstChild,d=l.nextSibling,g=e.nextSibling,w=g.nextSibling,C=w.firstChild;return i(d,()=>j().start),i(C,()=>j().end),a}}),null),i(c,v(B,{get when(){var a;return(a=t())==null?void 0:a.totalPrize},get children(){var a=Ot(),e=a.firstChild,l=e.nextSibling,d=l.firstChild,g=d.nextSibling;return i(e,()=>T("Total Prize")),i(d,()=>W.getCurrencySymbol(y()),null),i(d,()=>wt(!1,x().toNumber()),null),i(g,()=>W.printCurrency(x(),y()),null),i(g,()=>R.setting.localeCurrencyName,null),a}}),_),i(_,(()=>{var a=I(()=>{var e;return!!((e=t())!=null&&e.eventDetails)});return()=>a()&&(()=>{var e=Rt(),l=e.firstChild;return P(()=>{var d;return l.innerHTML=Z((d=t())==null?void 0:d.eventDetails)}),e})()})(),D),i(D,(()=>{var a=I(()=>{var e;return!!((e=t())!=null&&e.termsConditions)});return()=>a()&&(()=>{var e=Ut(),l=e.firstChild;return P(()=>{var d;return l.innerHTML=Z((d=t())==null?void 0:d.termsConditions)}),e})()})()),i(_,et,null),i(_,(()=>{var a=I(()=>{var e;return!!((e=t())!=null&&e.participatingGames)});return()=>a()&&(()=>{var e=Mt(),l=e.firstChild,d=l.nextSibling;return i(l,()=>T("Participating Games to win ")),i(d,v(ht,{get each(){var g;return(g=t())==null?void 0:g.participatingGames},children:(g,w)=>(()=>{var C=Nt(),A=C.firstChild,z=A.firstChild,F=A.nextSibling;return C.$$click=()=>{var L;return $((L=g.gameIdentity)!=null&&L.gameUrl.includes("detrade-trading")?"/trading/contract":`/game/${g.gameIdentity.gameUrl}`)},i(F,()=>g==null?void 0:g.fullName),P(()=>rt(z,"src",g==null?void 0:g.iconThreeFour)),C})()})),e})()})(),null),n}}),null),r}})};function Le(){const o=pt(),u=()=>o.pathname.split("/")[o.pathname.split("/").length-1];return v(at,{get when(){return u()==="casino_bonus"||u()==="sport_bonus"},get fallback(){return v(Gt,{})},get children(){return yt.renderEvent("promotionDetail").ui}})}it(["click"]);export{Gt as PromotionDetail,Le as default};
