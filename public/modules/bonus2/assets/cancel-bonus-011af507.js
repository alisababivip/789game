var b=(n,o,t)=>new Promise((m,c)=>{var r=u=>{try{s(t.next(u))}catch(d){c(d)}},e=u=>{try{s(t.throw(u))}catch(d){c(d)}},s=u=>u.done?m(u.value):Promise.resolve(u.value).then(r,e);s((t=t.apply(n,o)).next())});import{c as g,t as l,i as _,a as w}from"./i18n-98ba7270.js";import{p as y,P as p,B as A,X as f,a as i,D as a}from"./manifest-04ceac01.js";import{F as C}from"./solid-js-9bdbdf5e.js";import{h as N}from"./http-f69dd5cf.js";function B(){}var x=w('<div class="flex flex-col gap-y-4 font-semibold text-secondary"><p class=text-center>'),R=w('<div class="mt-9 flex w-full gap-x-2">'),v=w("<p class=text-center>");const h=n=>{var c;const o=(c=n.cb)!=null?c:B,t=()=>b(void 0,null,function*(){const r=[];if(n.amountChangeLogId||n.taskId){const e=yield N.post("/balance-controller/wager/task/bonus-cancel-amount/",{amountChangeLogId:n.amountChangeLogId,taskId:n.taskId}),u=f[e.currencyName].bonusAmount;if(e.taskType===3?(e.bonusSpentRatio||e.generalAddRatio)&&r.push(l("Canceling this reward will adjust your balance based on completed wagering progress."),l("You've spent __spentPercentage__ (__spentAmount__) bonus balance, so __remainPercentage__  (__remainAmount__) of your deposit balance will be remain in your deposit balance. ",{spentAmount:i.printCurrency(new a(e.bonusSpentAmount),e.currencyName,{target:e.currencyName}),spentPercentage:new a(e.bonusSpentRatio).mul(100).toFixed(2,a.ROUND_DOWN)+"%",remainAmount:i.printCurrency(new a(e.generalAddAmount),e.currencyName,{target:e.currencyName}),remainPercentage:new a(e.generalAddRatio).mul(100).toFixed(2,a.ROUND_DOWN)+"%"})):e.taskType===11&&r.push(l("Canceling this reward will adjust your balance based on the wager requirements youâ€™ve completed."),l("You've complete __wagerCompletedAmount__ (__generalAddRatio__) wager requirement, so __generalAddAmount__ (__generalAddRatio__) of your deposit balance will be remain in your deposit balance.",{wagerCompletedAmount:i.printCurrency(new a(e.wagerCompletedAmount),e.currencyName,{target:e.currencyName}),generalAddRatio:new a(e.generalAddRatio).mul(100).toFixed(2,a.ROUND_DOWN)+"%",generalAddAmount:i.printCurrency(new a(e.generalAddAmount),e.currencyName,{target:e.currencyName})})),r.length===0){const d=u.lessThan(e.bonusAmount)?u:e.bonusAmount;return r.push(l("__bonusAmount__ balance will be lost and you will not be able to claim this bonus again. Your bonus balance will __bonusBalanceRemain__ after removing this bonus.",{bonusAmount:i.printCurrency(new a(d),e.currencyName,{target:e.currencyName}),bonusBalanceRemain:i.printCurrency(u.sub(new a(d)),e.currencyName,{target:e.currencyName})})),r}return r}else if(n.cancelAmount){const s=f[n.currencyName].bonusAmount;r.push(l("__bonusAmount__ balance will be lost and you will not be able to claim this bonus again. Your bonus balance will __bonusBalanceRemain__ after removing this bonus.",{bonusAmount:i.printCurrency(new a(n.cancelAmount),n.currencyName,{target:n.currencyName}),bonusBalanceRemain:i.printCurrency(s.sub(new a(n.cancelAmount)),n.currencyName,{target:n.currencyName})}))}else r.push(l("Are you sure you want to cancel this bonus?"));return r}),m=new Promise(r=>b(void 0,null,function*(){const e=yield t();y.push(()=>g(P,{texts:e,onConfirmed:s=>(r(s),m.then(o))}))}));return m},P=n=>g(p,{type:"center",class:"!w-[28rem]",get title(){return l("Cancel This Bonus")},get children(){return[(()=>{var o=x(),t=o.firstChild;return _(t,()=>n.texts[0]),_(o,g(C,{get each(){return n.texts.slice(1)},children:m=>(()=>{var c=v();return _(c,m),c})()}),null),o})(),(()=>{var o=R();return _(o,g(A,{type:"second",class:"flex-grow",onClick:()=>{var t;return y.pop(),(t=n.onConfirmed)==null?void 0:t.call(n,!1)},get children(){return l("Keep Bonus")}}),null),_(o,g(A,{class:"flex-grow",type:"brand",onClick:()=>{var t;return y.pop(),(t=n.onConfirmed)==null?void 0:t.call(n,!0)},get children(){return l("Cancel Bonus")}}),null),o})()]}}),T=Object.freeze(Object.defineProperty({__proto__:null,default:h,popupCancelBonus:h},Symbol.toStringTag,{value:"Module"}));export{T as c,B as n,h as p};
