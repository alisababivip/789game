var L=Object.defineProperty,v=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var h=(t,e,o)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,d=(t,e)=>{for(var o in e||(e={}))b.call(e,o)&&h(t,o,e[o]);if(S)for(var o of S(e))G.call(e,o)&&h(t,o,e[o]);return t},g=(t,e)=>v(t,P(e));import{j as N,e as _,f as j}from"./solid-js-c760dca1.js";import{c as k}from"./store-53c53def.js";import{d as m,t as w}from"./manifest-085c1252.js";import{f as x,k as A}from"./utils-de8488f6.js";const y={areaCode:"1",countryCode:"CA",en:"Canada",value:"1"};function E(t){if(t){const e=t.split("__");return{areaCode:e[0],countryCode:e[1],en:e[2],value:e[0]}}else return d({},y)}function M(){const t=E(localStorage.getItem("user-select-area-code")),[e,o]=k({phone:"",areaCode:d({},t),areaCodeList:[]});return _(()=>{const n=[x()];m.login&&n.push(A()),Promise.all(n).then(([c,r])=>{let i="",l=d({},y);if(r&&r!==""){const a=r.split(")"),C=(a[0]||"").split("+")[1]||"",s=c.find(f=>f.areaCode===C);s&&(l=s),i=a[1]||""}else{let a=m.areaCode;localStorage.getItem("user-select-area-code")||(a=t.countryCode);const C=c.find(s=>s.countryCode===a);if(C)l=C;else{const s=c.find(f=>f.areaCode==="1");s&&(l=s)}}const u=c?c.map(a=>g(d({},a),{value:a.areaCode})):[];o({phone:i,areaCode:l,areaCodeList:u})}).catch(w)}),j(()=>{m.login&&A().then(n=>{let c="",r=d({},e.areaCode);if(n&&n!==""){const i=n.split(")"),u=(i[0]||"").split("+")[1]||"",a=e.areaCodeList.find(p=>p.areaCode===u);a&&(r=a),c=i[1]||"",o({phone:c,areaCode:{areaCode:r.areaCode,countryCode:r.countryCode,en:r.en,value:r.areaCode}})}}).catch(console.log)}),{state:e,setState:o}}const F=N(()=>M());export{F as p};
