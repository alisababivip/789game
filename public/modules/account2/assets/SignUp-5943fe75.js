var h=(s,g,c)=>new Promise((t,n)=>{var o=r=>{try{d(c.next(r))}catch(p){n(p)}},i=r=>{try{d(c.throw(r))}catch(p){n(p)}},d=r=>r.done?t(r.value):Promise.resolve(r.value).then(o,i);d((c=c.apply(s,g)).next())});import{_ as M,c as U,e as O,u as I,d as j,f,p as D,t as y,D as F,A as H,i as C,B,L as V,r as E}from"./manifest-085c1252.js";import{c as a,i as u,t as m,b as z,a as _}from"./i18n-c89f3d65.js";import{l as x,g as q,S as w,a as G,e as K,c as N}from"./solid-js-c760dca1.js";import{c as J}from"./store-53c53def.js";import{L as Q}from"./index-cfafd349.js";import{u as W,a as L}from"./ctx-e35816a7.js";import{a as T}from"./api-714394ad.js";import{p as X,g as b,b as Y,f as Z,i as $,a as k,c as ee}from"./utils-fc815858.js";import{S as te}from"./SignUpDesc-fa82e6d2.js";import{P as re}from"./PasswordInput-4a5a5453.js";import{E as ae}from"./EmailPhoneInput-81b67b30.js";import{i as R}from"./utils-de8488f6.js";import"./ThirdLogin-3b3670ba.js";import"./UnableLogin-e0a40924.js";import"./toInteger-d3049371.js";import"./toNumber-2a781ab2.js";import"./isObject-010a5422.js";import"./isObjectLike-e68f0fe0.js";import"./Icon-3c4242d7.js";import"./Icon-d970f300.js";import"./router-5e0daa1f.js";import"./md5-771285ef.js";import"./___vite-browser-external_commonjs-proxy-f1a149ad.js";import"./hmac-sha256-ab7884e0.js";import"./_MapCache-b362f000.js";var A=_("<span>"),ne=_('<div class="flex items-center mt-6 h-6"><span>'),se=_('<div class="absolute p-2 rounded-lg bg-layer5 shadow-[0_4px_4px_0_rgba(0,0,0,0.25)] -top-2 z-10 -translate-y-full sm:w-[150%] sm:right-0"><span></span><div class="absolute -bottom-1.5 left-4 w-0 h-0 triangle-bottom-layer5 sm:!left-[35%]">'),oe=_('<p class="text-xs text-error mt-1">'),ie=_("<form><div class=relative>");const le=x(()=>M(()=>import("./SignUp-a6d6c7db.js"),["assets/SignUp-a6d6c7db.js","assets/i18n-c89f3d65.js","assets/manifest-085c1252.js","assets/solid-js-c760dca1.js","assets/store-53c53def.js","assets/EmailPhoneInput-81b67b30.js","assets/utils-fc815858.js","assets/PasswordInput-4a5a5453.js","assets/utils-de8488f6.js","assets/_MapCache-b362f000.js","assets/isObject-010a5422.js","assets/Icon-d970f300.js","assets/SignUpDesc-fa82e6d2.js","assets/ctx-e35816a7.js","assets/ThirdLogin-3b3670ba.js","assets/UnableLogin-e0a40924.js","assets/toInteger-d3049371.js","assets/toNumber-2a781ab2.js","assets/isObjectLike-e68f0fe0.js","assets/Icon-3c4242d7.js","assets/api-714394ad.js","assets/md5-771285ef.js","assets/___vite-browser-external_commonjs-proxy-f1a149ad.js","assets/hmac-sha256-ab7884e0.js","assets/index-cfafd349.js","assets/router-5e0daa1f.js","assets/Registration-9895a3c4.js","assets/AddressAndAge-50c8e301.js"])),ge=x(()=>M(()=>import("./SignUp-d36fab4c.js"),["assets/SignUp-d36fab4c.js","assets/i18n-c89f3d65.js","assets/manifest-085c1252.js","assets/solid-js-c760dca1.js","assets/store-53c53def.js","assets/EmailPhoneInput-81b67b30.js","assets/utils-fc815858.js","assets/PasswordInput-4a5a5453.js","assets/utils-de8488f6.js","assets/_MapCache-b362f000.js","assets/isObject-010a5422.js","assets/Icon-d970f300.js","assets/SignUpDesc-fa82e6d2.js","assets/ctx-e35816a7.js","assets/ThirdLogin-3b3670ba.js","assets/UnableLogin-e0a40924.js","assets/toInteger-d3049371.js","assets/toNumber-2a781ab2.js","assets/isObjectLike-e68f0fe0.js","assets/Icon-3c4242d7.js","assets/api-714394ad.js","assets/md5-771285ef.js","assets/___vite-browser-external_commonjs-proxy-f1a149ad.js","assets/hmac-sha256-ab7884e0.js","assets/index-cfafd349.js","assets/router-5e0daa1f.js","assets/CpfAndAge-90d4ceb1.js"])),ce=function(){const g=I(),c=W(),{state:t}=L,[n,o]=J({loading:!1,agreementReject:!1,errorMsg:"",passwordError:"",sendTimes:0}),i=G(()=>X.test(t.emailOrPhone));K(()=>{j.login&&g(-1),f.emit("track_regist_page")}),f.on("account-regist-phone-verify",e=>{e?v(e,!0):(f.emit("regist-success"),c(!0))});const d=e=>h(this,null,function*(){try{const l=$()||t.whiteCode?"":yield E("regist");return R()||(yield k()),yield T.handleRegist(!1,t.emailOrPhone,t.password,t.invitationCode,t.marketing,e,l),o({loading:!1}),c(!0),!0}catch(l){return yield v(l),!1}}),r=()=>h(this,null,function*(){const e=ee(t.areaCode.areaCode,t.emailOrPhone);try{const l=$()||t.whiteCode?"":yield E("phone");R()||(yield k()),yield T.handleGetPhoneCaptcha({captchaType:"regist",code:l,invitationCode:t.invitationCode,phone:`(+${e.areaCode})${e.phone}`,resend:n.sendTimes>0},!1),o({loading:!1,sendTimes:n.sendTimes+1}),g(b("/login/phone-verify",t.auth))}catch(l){yield v(l,!0)}}),p=e=>h(this,null,function*(){if(e&&e.preventDefault(),n.loading||!t.emailOrPhone||t.invitationCodeError)return;if(!t.password||t.password.length<6){o({passwordError:m("Password length should not be less than 6 characters")});return}if(!Z(t.emailOrPhone)){y.error(m("Please enter valid email or phone number, no spaces or other special characters."));return}if(!t.agreement){o({agreementReject:!0});return}if(!i()&&t.emailOrPhone.includes("@partner.bc.game")){o({errorMsg:m("Invalid email address")});return}o({loading:!0}),f.emit("sensorsTrack",{event:"sign_click",sign_type:i()?"phone":"email",sign_input:t.emailOrPhone}),f.emit("track_registration_start",{sign_type:i()?"phone":"email"});const P=window.localStorage.getItem("before-user-login-type")||"";i()?yield r():yield d(P)}),v=(e,l=!1)=>h(this,null,function*(){e?(e.code===5801||l&&e.code===4112?(o({loading:!1,sendTimes:n.sendTimes+1}),(yield D.confirm(()=>(()=>{var S=A();return u(S,()=>m("Looks like you have already registered. Please sign in.")),S})()))&&g(b("/login/signin",t.auth),{replace:!0})):e.code>4e3&&e.code<5e3?(e.code===4110?o({loading:!1,sendTimes:n.sendTimes+1}):o({errorMsg:Y(e.code,l),sendTimes:n.sendTimes+1,loading:!1}),y(e)):(o({loading:!1,sendTimes:n.sendTimes+1}),y(e)),f.emit("track_registration_fail",{sign_type:l?"phone":"email",error:e}),e==="rate-limited"&&f.emit("track_registration_captcha_fail")):o({loading:!1})});return a(F,{class:"w-full account-dialog",get children(){return a(Q,{title:()=>m("Sign Up"),get children(){return[a(ue,{get loading(){return n.loading},onSubmitFn:p,get agreementReject(){return n.agreementReject},get errorMsg(){return n.errorMsg},get passwordError(){return n.passwordError},setStore:o}),(()=>{var e=ne(),l=e.firstChild;return u(l,()=>m("Already have an account?")),u(e,a(H,{get href(){return b("/login/signin",t.auth)},replace:!0,class:"ml-2 font-extrabold text-brand",get children(){return m("Sign In")}}),null),e})()]}})}})};function ue(s){const{state:g,onChange:c}=L,[t,n]=N(!1),{isKenyaHost:o}=U.getHostType(O.host);return(()=>{var i=ie(),d=i.firstChild;return z(i,"submit",s.onSubmitFn),u(d,a(ae,{get value(){return g.emailOrPhone},setValue:r=>c({emailOrPhone:r}),get areaCode(){return g.areaCode},get areaCodes(){return g.areaCodes},onFocus:()=>{n(!0),s.errorMsg&&s.setStore({errorMsg:""})},onBlur:()=>n(!1),setAreaCode:r=>c({areaCode:r}),inputType:o?"phone":"auto",get class(){return C(s.errorMsg&&"border-error")}}),null),u(d,a(w,{get when(){return t()&&g.emailOrPhone.length<=0},get children(){var r=se(),p=r.firstChild;return u(p,()=>m("Please make sure the email or phone number you entered is correct, as it will affect receiving your bonus.")),r}}),null),u(i,a(w,{get when(){return!!s.errorMsg},get children(){var r=oe();return u(r,()=>s.errorMsg),r}}),null),u(i,a(re,{get password(){return g.password},changePassword:r=>c({password:r}),get class(){return C("mt-3",s.passwordError&&"border-error")},onFocus:()=>{s.passwordError&&s.setStore({passwordError:""})}}),null),u(i,a(te,{get agreementReject(){return s.agreementReject},setReject:()=>s.setStore({agreementReject:!1})}),null),u(i,a(B,{type:"brand",class:"w-full mt-4",submit:!0,get children(){return a(w,{get when(){return s.loading},get fallback(){return(()=>{var r=A();return u(r,()=>m("Sign Up")),r})()},get children(){return a(V,{class:"!text-alw_white"})}})}}),null),i})()}const De=function(){const{isUsHost:g,isBrAuditHost:c}=U.getHostType(O.host);return a(q,{get children(){return a(w,{when:!g,get fallback(){return a(le,{})},get children(){return a(w,{when:!c,get fallback(){return a(ge,{})},get children(){return a(ce,{})}})}})}})};export{De as default};
