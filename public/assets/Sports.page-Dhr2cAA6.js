import{ag as x,D as w,a8 as v,j as b,l as j,aq as L,v as c,F as R,O as C,S as E,Q as O,a0 as N,b as I,o as _}from"./vendor-DPHX6XRs.js";import{a as q,ai as k,d as p,a8 as f,L as z,E as S,e as m,b as d,j as A,u as y,o as F}from"./common-CGW8ip2_.js";import{g as B}from"./index-CYisxgcc.js";var M=N('<div id=betby class="!my-0 -mx-4 min-h-[70vh] sm:mx-0">'),$=N('<div class="center -mt-4 h-[84vh] flex-auto sm:-mt-3">');const P=x(async function(){return[]}),Q={pt:"pt-br",tl:"en-ph"};function U(t){const{isNgHost:n,isNg2Host:e}=y.getHostType(m.host);return n||e?t?"bc-game-dark-classic":"bc-game-light-classic":t?"bc-game-dark-tile":"bc-game-light-tile"}function h(t){const n=document.documentElement,e=window.getComputedStyle(n),r=parseFloat(e.fontSize);return Number((t*(r/16)).toFixed(2))}let T=!1;async function V(t){T||(m.isDevHost?await y.loadScript("https://ui.invisiblesport.com/bt-renderer.min.js"):await y.loadScript("https://bcgame.sptsportscdn.com/bt-renderer.min.js"),T=!0)}async function Z(t,n,e,r,a,o,s,l){if(await V(),e&&r){const{lang:g,jwtToken:i}=await F().post("/platform-sports/v14/login",{device:t,lang:n,currency:e,brandId:o,bonus:l});return s?i:{jwtToken:i,lng:g}}else return{jwtToken:"",lng:""}}function G(t){const[n]=v(),[e,r]=I(0),a=A(),o=m.mobile;let s;async function l(){return t.onTokenExpired(!0)}function g(){return r(u=>u+1)}b(()=>{const u=n["bt-path"]||"/";s&&s.updateOptions({url:u})});const i=document.getElementsByClassName("page-header")[0]?.clientHeight||h(56),D=document.getElementsByClassName("tabbar")[0]?.clientHeight||h(72);return b(()=>{console.log(e());const u={token:t.token,brand_id:B(n.brandId),onTokenExpired:l,themeName:U(t.isDarken),lang:t.lng,target:document.getElementById("betby"),stickyTop:o?h(56):60,betslipZIndex:1,onLogin:function(){a("/login/signin")},onRegister:function(){a("/login/regist")},onRecharge:function(){a("/deposit")},betSlipOffsetTop:i,betSlipOffsetBottom:o?D:0,betSlipOffsetRight:o?0:70,onSessionRefresh:g};t.token||delete u.token,s&&s.kill();var H=new BTRenderer().initialize(u);s=H}),_(()=>{s&&s.kill(),s=void 0}),M()}function J(){const[t]=v(),n=()=>m.mobile?1:2,e=()=>p.login,r=m.isDevHost,a=()=>p.setting.currencyName,o=()=>Q[d.lang]??d.lang,s=()=>p.setting.currencyBonusType==="sport",l=i=>Z(n(),o(),a(),e(),r,B(t.brandId),i,s()),[g]=w(()=>a()+e()+o()+s()+d.darken,()=>l(!1));return c(E,{get when(){return g()},children:i=>c(G,{get token(){return i()?.jwtToken},get isDarken(){return d.darken},get lng(){return i().lng||o()},isDev:r,get device(){return n()},get currency(){return a()},get isLogin(){return e()},onTokenExpired:l})})}function Y(){const[t]=w(P,{initialValue:[]}),[n]=v();return b(()=>{q.emit("change_chatroom",14)}),j(()=>{if(n.bonus){const e=k[p.setting.currencyName];if(e&&e.groupAmount.sports.gt(0))f("setting","currencyBonusType","sport");else{const r=L(k,a=>a.groupAmount.sports.gt(0));r&&(f("setting","currencyName",r.currencyName),f("setting","currencyBonusType","sport"))}}}),c(O,{get fallback(){return(()=>{var e=$();return R(e,c(z,{})),e})()},get children(){return c(C,{fallback:e=>c(S,{class:"h-[84vh]",get children(){return e.message}}),get children(){return c(E,{get when(){return t().every(e=>e.type!=="Sports")},get fallback(){return c(S,{class:"h-[84vh]"})},get children(){return c(J,{})}})}})}})}export{Y as default};
