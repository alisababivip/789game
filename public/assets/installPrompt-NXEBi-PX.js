import{F as r,v as s,k as C,a1 as g,a0 as p,p as w,G as y,b as h,Y as I,o as S,S as P,P as k}from"./vendor-DPHX6XRs.js";import{I as A,B as _,e as m,b as z,k as v,u as b,ah as T,h as $,K as R,Q as D,a9 as E}from"./common-CGW8ip2_.js";import{t as f,P as L}from"./index-CYisxgcc.js";import{c as O}from"./createSteps-BmPZ6yMK.js";import{i as j}from"./utils-BHthhcHa.js";var F=p("<span class=ml-1>"),G=p('<div class="left-0 w-full flex items-center border-b border-solid p-4 gap-x-4 fixed bottom-18 z-100 mb-sb border-second bg-layer1"><div class="flex items-center gap-x-2"><div class="flex items-center justify-center rounded-md p-1 size-10 shrink-0 bg-[#23EE881A]"><img alt=""class=size-7></div><div class="leading-tight flex-grow"><h4 class="text-sm font-extrabold text-primary break-words"><span class=uppercase></span> </h4><p class="text-secondary text-xs text-balance"></p></div></div><div class="flex flex-grow justify-end">');const B=d=>(()=>{var a=G(),t=a.firstChild,l=t.firstChild,n=l.firstChild,e=l.nextSibling,i=e.firstChild,o=i.firstChild;o.nextSibling;var c=i.nextSibling,u=t.nextSibling;return r(a,s(_,{get onClick(){return d.onClose},class:"!p-0",size:"xs",get children(){return s(A,{name:"Close",class:"text-secondary size-5"})}}),t),r(o,()=>m.host),r(i,()=>f("Application"),null),r(c,()=>f("Unlock Fun with Exclusive Features")),r(u,s(_,{class:"w-24 border-solid font-extrabold border-2 border-third",size:"m",get onClick(){return d.onDownload},get children(){var x=F();return r(x,()=>f("Download")),x}})),C(()=>g(n,"src",z.darken?v.assets(m.inActive?"/logo/logo_small_festival.png":"/logo/logo_small.png"):v.assets(m.inActive?"/logo/logo_small_w_festival.png":"/logo/logo_small_w.png"))),a})(),Q="/assets/guide-BWa8xjQ7.gif",H="/assets/pwa-CuOdReJG.mp4";var M=p('<ul class="flex flex-col gap-y-4">'),N=p('<div class="h-64 overflow-hidden mt-6"><video class="size-full rounded-3xl"playsinline autoplay controls muted loop><source type=video/mp4><img class="size-full rounded-3xl">'),U=p('<li class="flex gap-x-3 leading-tight"><div class="flex items-center justify-center rounded-full bg-brand size-5 flex-shrink-0"></div><div class="flex flex-col gap-y-2"><h4 class=text-sm></h4><p class="text-secondary text-xs">');const W=()=>{const d=w(()=>b.isIos()?"iOS":"Android"),a=O(b.isIos()?"iOS":"android");return s(T,{get title(){return`${d()} ${f("Instructions")}`},get children(){return[(()=>{var t=M();return r(t,s(y,{get each(){return a()},children:(l,n)=>(()=>{var e=U(),i=e.firstChild,o=i.nextSibling,c=o.firstChild,u=c.nextSibling;return r(i,()=>n()+1),r(c,()=>l.guideTitle),r(u,()=>l.guideDesc),e})()})),t})(),(()=>{var t=N(),l=t.firstChild,n=l.firstChild,e=n.nextSibling;return g(n,"src",H),g(e,"src",Q),t})()]}})},[Y,J]=$(h(0),{name:"pwa-prompt-times"}),[K,V]=$(h(!1),{name:"accepted-install"}),se=()=>{const d=I(),a=()=>!window.is_webview&&!j()&&Y()<3&&!K()&&m.mobile&&d.pathname==="/",t=async()=>{E.push(()=>s(W,{}))},[l,n]=h({handler:t});if("onbeforeinstallprompt"in window){const e=i=>{i.preventDefault();const o=i;n({handler:async()=>{await o.prompt(),(await o.userChoice).outcome==="accepted"&&(V(!0),n(null))}})};window.addEventListener("beforeinstallprompt",e),S(()=>{window.removeEventListener("beforeinstallprompt",e)})}return s(k,{get children(){return s(R,{name:"slideUp",get children(){return s(D,{onRender:()=>J(e=>e+1),priority:L,get children(){return s(P,{get when(){return w(()=>!!a())()&&l()},children:e=>s(B,{get onDownload(){return l().handler},onClose:()=>n(null)})})}})}})}})};export{se as default};
